{"ast":null,"code":"import { firebaseServer } from '../../config/firebase/server';\nimport { differenceInHours, format, addHours } from 'date-fns';\nconst db = firebaseServer.firestore();\nconst profile = db.collection('profiles');\nconst agenda = db.collection('agenda');\nconst startAt = new Date(2021, 1, 1, 8, 0);\nconst endAt = new Date(2021, 1, 1, 17, 0);\nconst totalHours = differenceInHours(endAt, startAt);\nconst timeBlocks = [];\n\nfor (let blockIndex = 0; blockIndex <= totalHours; blockIndex++) {\n  const time = format(addHours(startAt, blockIndex), \"HH:mm\");\n  timeBlocks.push(time);\n}\n\nexport default (async (req, res) => {\n  console.log(timeBlocks);\n\n  try {\n    // const profileDoc = await profile\n    //     .where('username','===',req.query.username)\n    //     .get()\n    // const snapshot  = await agenda \n    //         .where('userId', '===', profileDoc.userId)\n    //         .where('when','===',req.query.when) \n    //         .get()\n    return res.status(200).json(timeBlocks);\n  } catch (error) {\n    console.log('FB', error);\n    return res.status(401);\n  }\n});","map":{"version":3,"sources":["/home/nil/projetos/clocker/pages/api/schedule.js"],"names":["firebaseServer","differenceInHours","format","addHours","db","firestore","profile","collection","agenda","startAt","Date","endAt","totalHours","timeBlocks","blockIndex","time","push","req","res","console","log","status","json","error"],"mappings":"AAAA,SAASA,cAAT,QAA+B,8BAA/B;AACA,SAASC,iBAAT,EAA4BC,MAA5B,EAAoCC,QAApC,QAAoD,UAApD;AAEA,MAAMC,EAAE,GAAGJ,cAAc,CAACK,SAAf,EAAX;AACA,MAAMC,OAAO,GAAGF,EAAE,CAACG,UAAH,CAAc,UAAd,CAAhB;AACA,MAAMC,MAAM,GAAGJ,EAAE,CAACG,UAAH,CAAc,QAAd,CAAf;AAEA,MAAME,OAAO,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAhB;AACA,MAAMC,KAAK,GAAG,IAAID,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB,EAArB,EAAyB,CAAzB,CAAd;AACA,MAAME,UAAU,GAAGX,iBAAiB,CAACU,KAAD,EAAQF,OAAR,CAApC;AACA,MAAMI,UAAU,GAAC,EAAjB;;AACA,KAAI,IAAIC,UAAU,GAAG,CAArB,EAAwBA,UAAU,IAAIF,UAAtC,EAAkDE,UAAU,EAA5D,EAA+D;AAC3D,QAAMC,IAAI,GAAGb,MAAM,CAACC,QAAQ,CAACM,OAAD,EAASK,UAAT,CAAT,EAA8B,OAA9B,CAAnB;AACAD,EAAAA,UAAU,CAACG,IAAX,CAAgBD,IAAhB;AACH;;AACD,gBAAe,OAAME,GAAN,EAAWC,GAAX,KAAkB;AAC7BC,EAAAA,OAAO,CAACC,GAAR,CAAYP,UAAZ;;AACF,MAAI;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AAGI,WAAOK,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBT,UAArB,CAAP;AACF,GAXJ,CAWK,OAAOU,KAAP,EAAc;AACbJ,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBG,KAAlB;AACA,WAAOL,GAAG,CAACG,MAAJ,CAAW,GAAX,CAAP;AACH;AAGJ,CAnBD","sourcesContent":["import { firebaseServer } from '../../config/firebase/server'\nimport { differenceInHours, format, addHours } from 'date-fns'\n\nconst db = firebaseServer.firestore()\nconst profile = db.collection('profiles')\nconst agenda = db.collection('agenda')\n\nconst startAt = new Date(2021, 1, 1, 8, 0)\nconst endAt = new Date(2021, 1, 1, 17, 0)\nconst totalHours = differenceInHours(endAt, startAt)\nconst timeBlocks=[]\nfor(let blockIndex = 0; blockIndex <= totalHours; blockIndex++){\n    const time = format(addHours(startAt,blockIndex),\"HH:mm\")\n    timeBlocks.push(time)\n}\nexport default async(req, res) =>{\n    console.log(timeBlocks);\n  try {\n    // const profileDoc = await profile\n    //     .where('username','===',req.query.username)\n    //     .get()\n    // const snapshot  = await agenda \n    //         .where('userId', '===', profileDoc.userId)\n    //         .where('when','===',req.query.when) \n    //         .get()\n\n\n        return res.status(200).json(timeBlocks)\n     } catch (error) {\n        console.log('FB', error);\n        return res.status(401)\n    }\n     \n \n}"]},"metadata":{},"sourceType":"module"}