{"ast":null,"code":"import { addHours } from 'date-fns';\nimport { differenceInHours } from 'date-fns/esm';\nimport firebaseServer from '../../config/firebase/server';\nconst db = firebaseServer.firestore();\nconst profile = db.collection('profile');\nconst agenda = db.collection('agenda');\nconst startAt = new Date(2021, 1, 1, 8, 0);\nconst endAt = new Date(2021, 1, 1, 17, 0);\nconst totalHours = differenceInHours(endAt, startAt);\nconst timeBlocks = [];\n\nfor (let blockIndex = 0; blockIndex <= totalHours; blockIndex++) {\n  const time = format(addHours(startAt, blockIndex), \"HH:mm\");\n  timeBlocks.push(time);\n}\n\nexport default (async (req, res) => {\n  console.log(timeBlocks);\n\n  try {\n    // const profileDoc = await profile\n    //     .where('username','===',req.query.username)\n    //     .get()\n    // const snapshot  = await agenda \n    //         .where('userId', '===', profileDoc.userId)\n    //         .where('when','===',req.query.when) \n    //         .get()\n    return res.status(200).json(timeBlocks);\n  } catch (error) {\n    console.log('FB', error);\n    return res.status(401);\n  }\n});","map":{"version":3,"sources":["/home/nil/projetos/clocker/pages/api/schedule.js"],"names":["addHours","differenceInHours","firebaseServer","db","firestore","profile","collection","agenda","startAt","Date","endAt","totalHours","timeBlocks","blockIndex","time","format","push","req","res","console","log","status","json","error"],"mappings":"AAAA,SAASA,QAAT,QAAyB,UAAzB;AACA,SAASC,iBAAT,QAAkC,cAAlC;AACA,OAAOC,cAAP,MAA2B,8BAA3B;AAEA,MAAMC,EAAE,GAAGD,cAAc,CAACE,SAAf,EAAX;AACA,MAAMC,OAAO,GAAGF,EAAE,CAACG,UAAH,CAAc,SAAd,CAAhB;AACA,MAAMC,MAAM,GAAGJ,EAAE,CAACG,UAAH,CAAc,QAAd,CAAf;AAEA,MAAME,OAAO,GAAG,IAAIC,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAhB;AACA,MAAMC,KAAK,GAAG,IAAID,IAAJ,CAAS,IAAT,EAAe,CAAf,EAAkB,CAAlB,EAAqB,EAArB,EAAyB,CAAzB,CAAd;AACA,MAAME,UAAU,GAAGV,iBAAiB,CAACS,KAAD,EAAQF,OAAR,CAApC;AACA,MAAMI,UAAU,GAAC,EAAjB;;AACA,KAAI,IAAIC,UAAU,GAAG,CAArB,EAAwBA,UAAU,IAAIF,UAAtC,EAAkDE,UAAU,EAA5D,EAA+D;AAC3D,QAAMC,IAAI,GAAGC,MAAM,CAACf,QAAQ,CAACQ,OAAD,EAASK,UAAT,CAAT,EAA8B,OAA9B,CAAnB;AACAD,EAAAA,UAAU,CAACI,IAAX,CAAgBF,IAAhB;AACH;;AACD,gBAAe,OAAMG,GAAN,EAAWC,GAAX,KAAkB;AAC7BC,EAAAA,OAAO,CAACC,GAAR,CAAYR,UAAZ;;AACF,MAAI;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AAGI,WAAOM,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBV,UAArB,CAAP;AACF,GAXJ,CAWK,OAAOW,KAAP,EAAc;AACbJ,IAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBG,KAAlB;AACA,WAAOL,GAAG,CAACG,MAAJ,CAAW,GAAX,CAAP;AACH;AAGJ,CAnBD","sourcesContent":["import { addHours } from 'date-fns'\nimport { differenceInHours } from 'date-fns/esm'\nimport firebaseServer from '../../config/firebase/server'\n\nconst db = firebaseServer.firestore()\nconst profile = db.collection('profile')\nconst agenda = db.collection('agenda')\n\nconst startAt = new Date(2021, 1, 1, 8, 0 )\nconst endAt = new Date(2021, 1, 1, 17, 0 )\nconst totalHours = differenceInHours(endAt, startAt)\nconst timeBlocks=[]\nfor(let blockIndex = 0; blockIndex <= totalHours; blockIndex++){\n    const time = format(addHours(startAt,blockIndex),\"HH:mm\")\n    timeBlocks.push(time)\n}\nexport default async(req, res) =>{\n    console.log(timeBlocks);\n  try {\n    // const profileDoc = await profile\n    //     .where('username','===',req.query.username)\n    //     .get()\n    // const snapshot  = await agenda \n    //         .where('userId', '===', profileDoc.userId)\n    //         .where('when','===',req.query.when) \n    //         .get()\n\n\n        return res.status(200).json(timeBlocks)\n     } catch (error) {\n        console.log('FB', error);\n        return res.status(401)\n    }\n     \n \n}"]},"metadata":{},"sourceType":"module"}